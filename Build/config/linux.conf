##
##  amd64-linux (default) || i686-linux ...
##
X4C_ARCH  ?= amd64
X4C_BUILD := linux

ifneq ("$(X4C_ARCH)","amd64")
X4C_ARCH  := i686
endif

ifeq ("$(E)","1")
X4C_TOOLCHAIN_CFLAGS	?= -Wall -Werror 
X4C_TOOLCHAIN_CXXFLAGS	?= -Wall -Werror 
else
X4C_TOOLCHAIN_CFLAGS	?= -Wall
X4C_TOOLCHAIN_CXXFLAGS	?= -Wall
endif

ifeq ("$(R)$(BT)","10")
X4C_TOOLCHAIN_CFLAGS	+= -fomit-frame-pointer
X4C_TOOLCHAIN_CXXFLAGS	+= -fomit-frame-pointer
endif

ifeq ("$(X4C_ARCH)","amd64")
X4C_CC    ?= $(X4C_BUILD_CROSS)gcc -m64
X4C_CXX   ?= $(X4C_BUILD_CROSS)g++ -m64
X4C_AR    ?= $(X4C_BUILD_CROSS)ar
X4C_LD    ?= $(X4C_BUILD_CROSS)g++ -m64
else
X4C_CC    ?= $(X4C_BUILD_CROSS)gcc -m32
X4C_CXX   ?= $(X4C_BUILD_CROSS)g++ -m32
X4C_AR    ?= $(X4C_BUILD_CROSS)ar
X4C_LD    ?= $(X4C_BUILD_CROSS)g++ -m32
endif

ifeq ("$(X4C_ARCH)","amd64")
X4C_ASM   ?= nasm -f elf64 -g
else
X4C_ASM   ?= nasm -f elf32 -g
endif

X4C_TOOLCHAIN_LDEXEFLAGS += -pthread -lrt -ldl -lm -lc
X4C_TOOLCHAIN_LDDLLFLAGS += -pthread -lrt -ldl -lm -lc -Wl,--no-undefined
X4C_TOOLCHAIN_CFLAGS     += -ffunction-sections -fdata-sections -fPIC -DPIC -fvisibility=hidden
X4C_TOOLCHAIN_CXXFLAGS   += -ffunction-sections -fdata-sections -fPIC -DPIC -fvisibility=hidden -fvisibility-inlines-hidden

