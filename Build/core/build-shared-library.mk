
$(call assert-defined, LOCAL_MODULE )
$(call x4c_add_module, $(LOCAL_MODULE) )

LOCAL_MODULE_TARGET		  := $(X4C_BINARY)/lib$(LOCAL_MODULE)$(DLLEXT)
LOCAL_MODULE_TARGET_TEMP  := $(X4C_LIBRARY)/lib$(LOCAL_MODULE)$(DLLEXT)
LOCAL_MODULE_TARGETS	  := $(LOCAL_MODULE_TARGET) $(LOCAL_MODULE_TARGET_TEMP)

LOCAL_CFLAGS	+= $(X4C_TOOLCHAIN_SHARED_CFLAGS) -DX4C_EXPORT_$(LOCAL_MODULE)
LOCAL_CXXFLAGS	+= $(X4C_TOOLCHAIN_SHARED_CXXFLAGS) -DX4C_EXPORT_$(LOCAL_MODULE)
LOCAL_LDFLAGS	+= $(X4C_TOOLCHAIN_LDSOFLAGS) $(X4C_TOOLCHAIN_LDDLLFLAGS)

include $(my-dir)/build-binary.mk

$(eval $(call x4c-cmd-ldso,\
	$(LOCAL_MODULE)-objects-list,$(LOCAL_MODULE_TARGET_TEMP),$(LOCAL_MODULE)_LDFLAGS))

$(eval $(call x4c-cmd-intstall-shared-lib,\
	$(LOCAL_MODULE_TARGET_TEMP),$(LOCAL_MODULE_TARGET)))

$(eval $(LOCAL_MODULE_TARGET_TEMP) : $($(LOCAL_MODULE)-EXT_DEPENDS_LIBRARY) )

LOCAL_MODULE_TARGET		 := $(empty)
LOCAL_MODULE_TARGET_TEMP := $(empty)
LOCAL_MODULE_TARGETS	 := $(empty)
